<div class="page-header"><h2><a href="#" editable-text="project.name">{{ project.name }}</a><br><small>{{ project.type }}</small></h2></div>

<div class="row">
    <div class="col-sm-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Add Role</h3>
            </div>
            <div class="panel-body">
                <form class="form-inline">
                  <div class="form-group">
                      <input type="text" class="form-control" placeholder="New Role Name" ng-model="newRoleName">
                      <input type="text" class="form-control" placeholder="Description" ng-model="newRoleDescription">
                      <button class="btn btn-primary btn" type="submit" ng-click="addRole()">Add</button>
                  </div>
                </form>
            </div>
        </div>
    </div>
     <div class="col-sm-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Description / Notes</h3>
            </div>
            <div class="panel-body">
                <textarea class="form-control" rows="3" ng-model="project.description">{{ project.description }}</textarea>
            </div>
        </div>
    </div>
</div>

<br />

<div class="panel panel-primary">
    <div class="panel-heading">
      <div class="panel-title">Playbooks
      <small><font color="black"><input class="input-xs pull-right" ng-model="searchText" placeholder="Search" /></font></small></div>
    </div>
    <div class="panel-body">
        <table class="table table-hover"  id="roles" ng-show="roles">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Actions</th>
                <th>Destiny Actions</th>
                <th>Last Run</th>
                <th>Returns</th>
            </tr>
            <tr ng-repeat="(key, role) in roles | orderByPriority | filter:searchText">
                <td>
                    <a href="#/projects/Ansible/{{ projectID }}/roles/{{ role.$id }}">{{ role.name }}</a>
                </td>
                <td>
                    {{ role.description }}
                </td>
                <td>
                    <button type="button" class="btn btn-success btn-xs" ng-click="cloneRole(projectID, role.$id)">Clone</button>
                    <a href="#/projects/Ansible/{{ projectID }}/roles/{{ role.$id }}" class="btn btn-info btn-xs" role="button">Manage</a>
                    <button popover="Click role name at top of next page to rename." popover-title="Rename Project" class="btn btn-warning btn-xs">Rename</button>
                    <button type="button" class="btn btn-danger btn-xs" ng-click="removeRole(role.$id)">Delete</button>
                </td>
                <td>
                    <button type="button" class="btn btn-primary btn-xs" ng-click="ansible_playbook(role.$id)">Run Playbook</button>
                    <button type="button" class="btn btn-danger btn-xs" ng-click="clear_playbook_returns(role.$id)">Clear Returns</button>
                </td>
                <td>
                    {{ role.status }}
                </td>
                <td>
                    <ul ng-repeat="return in role.returns">
                        <li>{{ return }}</li>
                    </ul>
                </td>
            </tr>
        </table>
    </div>
</div>

<br />


<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Add Host</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                  <div class="col-sm-6">
                      <div class="col-sm-6">
                        <input type="text" class="form-control" ng-model="newHostName">
                        <span class="help-block">New HostName / IP Address</span>
                      </div>
                      <div class="col-sm-6">
                        <input class="form-control" type="text" ng-model="ansible_group">
                        <span class="help-block">Group</span>
                      </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-sm-12">
                      <div><!-- <div ng-model="inventoryOptions" ng-repeat="option in inventoryOptions | orderByPriority"> -->
                        <div class="col-sm-3 form-group">
                          <!-- <input type="hidden" ng-model="option.name" value="{{ option.name }}"> -->
                          <!-- <input class="form-control" type="text" ng-model="option.value" tooltip="{{ option.description }}" tooltip-trigger="focus" tooltip-placement="above"> -->
                          <!-- <span class="help-block">{{ option.name }}</span> -->
                          <input class="form-control" type="text" ng-model="ansible_ssh_host">
                          <span class="help-block">ansible_ssh_host</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_ssh_port">
                          <span class="help-block">ansible_ssh_port</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_ssh_user">
                          <span class="help-block">ansible_ssh_user</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="password" ng-model="ansible_ssh_pass">
                          <span class="help-block">ansible_ssh_pass</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="password" ng-model="ansible_sudo_pass">
                          <span class="help-block">ansible_sudo_pass</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_connection">
                          <span class="help-block">ansible_connection</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_ssh_private_key_file">
                          <span class="help-block">ansible_ssh_private_key_file</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_python_interpreter">
                          <span class="help-block">ansible_python_interpreter</span>
                        </div>
                        <div class="col-sm-3 form-group">
                          <input class="form-control" type="text" ng-model="ansible_interpreter">
                          <span class="help-block">ansible\_\*\_interpreter</span>
                        </div>
                        <button class="btn btn-primary btn" type="submit" ng-click="addHost()">Add Host</button>
                        </div>
                      </div><!-- </div> -->
                      
                  </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
     <div class="col-sm-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
              <div class="panel-title">
                Inventory
                <div class="pull-right">
                    <small>
                        <font color="black">
                        <input class="input-xs" ng-model="inventoryPattern" placeholder="pattern, * for all">
                        <input class="input-xs" ng-model="inventoryModuleToRun" placeholder="module">
                        <input class="input-xs" ng-model="inventoryModuleArgs" placeholder="args">
                        <button class="btn btn-xs btn-warning" ng-click="ansibleJenericInventory_run(projectID, inventoryPattern, inventoryModuleToRun, inventoryModuleArgs)">Run</button>
                        </font>
                    </small>
                </div>
              </div>
            </div>
            <div class="panel-body">
                <table class="table" ng-model="inventorylist">
                    <tr>
                        <th>Name</th>
                        <th>Group</th>
                        <th>Host</th>
                        <th>User</th>
                        <th>Actions</th>
                    </tr>
                    <tr ng-repeat="(key, item) in inventory | orderByPriority">
                        <td>
                            {{ item.name }}
                        </td>
                        <td>
                            {{ item.group }}
                        </td>
                        <td>
                            {{ item.ansible_ssh_host }}
                        </td>
                        <td>
                            {{ item.ansible_ssh_user }}
                        </td>
                        <td>
                            <input class="input" ng-model="commandToRun" placeholder="command"><button class="btn btn-xs btn-primary" ng-click="ansibleJeneric(item.$id, 'command', commandToRun)">Run Command</button>
                            <button class="btn btn-xs btn-info" ng-click="ansibleJeneric(item.$id, 'ping', '')">Ping</button>
                            <button class="btn btn-xs btn-danger" ng-click="removeHost(item.$id)">Delete</button>
                        </td>
                    </tr>
                </table>
                
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Tasks<button class="btn btn-xs btn-danger pull-right" ng-click="clearTasks()">Clear Buffer</button></h3>
            </div>
            <div class="panel-body">
                <table class="table">
                    <tr>
                        <th>Command</th>
                        <th>Status</th>
                        <th>Returns</th>
                    </tr>
                    <tr ng-model="external_data" ng-repeat="item in external_data | orderByPriority">
                        <td>
                            {{ item.module_name }}
                        </td>
                        <td>
                            {{ item.status }} 
                        </td>
                        <td>
                            <div ng-model="item.returns" ng-repeat="return in item.returns | orderByPriority">
                                {{ return | json }}
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>